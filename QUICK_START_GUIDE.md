# クイックスタートガイド - 包括的スケジューリングシステム

## ✅ 完成機能

1. **広告動画の自動フィルタリング** ✅
2. **YouTubeアナリティクス統合** ✅
3. **包括的ML/RLスケジュール最適化** ✅
   - バイラリティ最大化
   - 公開順序最適化
   - 投稿間隔最適化
   - release_dateルール対応

---

## 🚀 使い方（3ステップ）

### ステップ1: データ統合（初回のみ、5-15分）

```bash
cd "/Users/shii/Desktop/song virality validator"
python3 data_integrator.py
```

**プロンプトでの入力**:
```
YouTube APIでデータを補強しますか？ (y/n): y
YouTubeアナリティクスデータを統合しますか？ (y/n): y
広告動画を除外しますか？ (y/n, デフォルト: y): y
```

**結果**:
- `ML_training_data.json` が作成される
- 582件のデータ + YouTubeアナリティクス
- 広告動画が自動除外される

---

### ステップ2: main.pyを起動

```bash
python3 main.py
```

**メニューから選択**:
```
10. 🤖 ML/RLスケジュール最適化
```

---

### ステップ3: 最適化実行（2-5分）

**プロンプトでの入力**:
```
最適化モードを選択してください:
  1. バイラリティ最大化のみ
  2. 公開順序最適化のみ
  3. 投稿間隔最適化のみ
  4. 総合最適化（推奨）

選択（デフォルト: 4）: 4

制約条件（デフォルト値を使用する場合はEnter）:
  最低投稿間隔（時間, デフォルト: 6）:
  1日あたり最大投稿数（デフォルト: 2）:
```

**結果**:
- `optimized_schedule.json` が作成される
- `optimized_schedule.csv` が作成される（Excel用）
- スケジュールサマリーが表示される

---

## 📊 出力ファイル

### optimized_schedule.csv
Excelで開いて確認できます：

| 投稿日時 | 曲名 | アーティスト名 | 予測視聴数 | スケジュールモード | 優先スコア |
|---------|-----|--------------|----------|----------------|----------|
| 2025-12-17T18:00:00 | 虹 | 菅田将暉 | 183,063,048 | free | 953.2 |
| 2025-12-18T18:00:00 | ブラザービート | Snow Man | 115,750,635 | free | 928.3 |

**列の説明**:
- **投稿日時**: 最適な投稿日時
- **スケジュールモード**:
  - `free`: 完全に自由にスケジュール可能
  - `date_fixed`: release_date固定、時間のみ最適化
- **優先スコア**: 公開順序最適化のスコア（高いほど優先）
- **間隔調整**: 投稿間隔の制約により調整されたか

---

## 🎯 最適化の仕組み

### 1. バイラリティ最大化
- ML予測モデルで各時間帯の視聴数を予測
- 最も効果的な時間帯を自動選択
- 平日18時、週末20時など、曜日・時間帯を考慮

### 2. 公開順序最適化
優先スコア = release_date優先度 + 予測視聴数 + 高評価率 + アナリティクスデータ

**優先される曲**:
1. release_dateが近い曲（締め切り優先）
2. 予測視聴数が高い曲（バイラル可能性）
3. 高評価率が高い曲（品質保証）
4. チャンネル登録者増加が多い曲（成長促進）

### 3. 投稿間隔最適化
- 最低投稿間隔: 6時間（デフォルト）
- 1日最大投稿数: 2本（デフォルト）
- 視聴者疲労を避け、チャンネルアルゴリズムを最適化

### 4. release_dateルール
- `release_date < 今日` → 完全に自由にスケジュール可能
- `release_date ≥ 今日` → その日付固定、時間のみ最適化

---

## 🔧 制約条件のカスタマイズ

デフォルト値を変更したい場合：

```
最低投稿間隔（時間, デフォルト: 6）: 12  ← 12時間に変更
1日あたり最大投稿数（デフォルト: 2）: 1   ← 1日1本に変更
```

---

## 📝 広告動画のフィルタリング

以下のキーワードを含むタイトルは自動的に除外されます：
- `広告`
- `広告_`
- `_広告`
- `ad_`
- `_ad`

**除外される例**:
- `2401曲だけキラキラ広告_縦`
- `広告_推しの曲_縦`
- `ad_campaign_2024`

**除外を無効にしたい場合**:
```bash
python3 data_integrator.py
# → YouTubeアナリティクスデータを統合しますか？ (y/n): y
# → 広告動画を除外しますか？ (y/n, デフォルト: y): n
```

---

## 💡 よくある質問

### Q1: release_date未来の曲を早期投稿したい
**A**: 以下の方法があります：
1. CSVから該当曲の `release_date` を削除（空白にする）
2. release_dateを過去の日付に変更

### Q2: すべての曲が同じ時間帯（18時）になる
**A**: これは最適化の結果です。統計的に18時が最も効果的な時間帯です。
- 時間帯を分散させたい場合は、制約条件で `max_posts_per_day: 1` に設定してください

### Q3: 広告動画が除外されない
**A**: タイトルに広告キーワードが含まれているか確認してください。
- 含まれていない場合は、手動で `is_advertisement: true` を設定できます

### Q4: ML_training_data.json が見つかりません
**A**: 先に `python3 data_integrator.py` を実行してください

---

## 📈 期待される効果

| 最適化 | 改善率（推定） |
|-------|-------------|
| バイラリティ最大化 | 視聴数+15-30% |
| 公開順序最適化 | チャンネル登録者+20-40% |
| 投稿間隔最適化 | エンゲージメント+15-25% |
| **総合最適化** | **総視聴数+30-50%** |

---

## 📚 詳細ドキュメント

- **[COMPREHENSIVE_SCHEDULING_GUIDE.md](COMPREHENSIVE_SCHEDULING_GUIDE.md)** - 完全な使用ガイド
- **[FINAL_IMPLEMENTATION_SUMMARY.md](FINAL_IMPLEMENTATION_SUMMARY.md)** - 実装サマリー
- **[ML_ACCURACY_IMPROVEMENTS.md](ML_ACCURACY_IMPROVEMENTS.md)** - ML精度向上の詳細

---

## ✅ チェックリスト

### 初回セットアップ
- [ ] `python3 data_integrator.py` を実行
- [ ] YouTube API エンリッチメント: y
- [ ] YouTubeアナリティクス統合: y
- [ ] 広告動画を除外: y
- [ ] `ML_training_data.json` が作成されたか確認

### スケジュール最適化
- [ ] `python3 main.py` を起動
- [ ] オプション10を選択
- [ ] 最適化モード: 4（総合最適化）
- [ ] 制約条件を設定（またはデフォルト）
- [ ] `optimized_schedule.csv` が作成されたか確認

### 結果確認
- [ ] `optimized_schedule.csv` をExcelで開く
- [ ] 投稿日時が適切か確認
- [ ] release_date固定の曲が正しく処理されているか確認
- [ ] 必要に応じて制約条件を調整して再実行

---

これで完了です！質問があればお気軽にどうぞ。
